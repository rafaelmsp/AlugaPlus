(self.webpackChunkaluga_crm_frontend=self.webpackChunkaluga_crm_frontend||[]).push([[104],{6104:(B,C,f)=>{"use strict";f.r(C),f.d(C,{VISTORIAS_ROUTES:()=>J});var e=f(4438),v=f(177),I=f(1569);function y(o,l){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.avaliacao,"/10 ")}}function F(o,l){1&o&&e.EFF(0,"--")}function R(o,l){if(1&o&&(e.j41(0,"tr",11)(1,"td",9),e.EFF(2),e.k0s(),e.j41(3,"td",9),e.EFF(4),e.k0s(),e.j41(5,"td",9),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td",9)(9,"span",12),e.EFF(10),e.k0s()(),e.j41(11,"td",9),e.DNE(12,y,2,1,"span",13)(13,F,1,0,"ng-template",null,0,e.C5r),e.k0s()()),2&o){const t=l.$implicit,i=e.sdS(14);e.R7$(2),e.JRh(t.imovel),e.R7$(2),e.JRh(t.contrato||"N/A"),e.R7$(2),e.JRh(e.i5U(7,6,t.dataVistoria,"shortDate")),e.R7$(4),e.SpI(" ",t.tipo," "),e.R7$(2),e.Y8G("ngIf",t.avaliacao)("ngIfElse",i)}}let b=(()=>{class o{constructor(){this.vistorias=(0,e.vPA)([{id:1,imovel:"Rua Azul, 45 - Casa",contrato:"Contrato #10",dataVistoria:(new Date).toISOString(),tipo:"ENTRADA",avaliacao:9}])}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-vistoria-list"]],standalone:!0,features:[e.aNF],decls:25,vars:1,consts:[["semNota",""],[1,"space-y-6"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"text-2xl","font-semibold","text-primary"],[1,"text-sm","text-gray-400"],["routerLink","nova",1,"btn-primary","text-sm","w-full","md:w-auto","text-center"],[1,"card","overflow-x-auto"],[1,"min-w-full","text-left","text-sm"],[1,"text-xs","uppercase","text-gray-400","border-b","border-primary/20"],[1,"py-2"],["class","border-b border-primary/10",4,"ngFor","ngForOf"],[1,"border-b","border-primary/10"],[1,"px-2","py-1","rounded-full","text-xs","bg-primary/10","text-primary"],[4,"ngIf","ngIfElse"]],template:function(i,n){1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div")(3,"h1",3),e.EFF(4,"Vistorias"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"Controle de vistorias com fotos e relatorios."),e.k0s()(),e.j41(7,"a",5),e.EFF(8,"Agendar vistoria"),e.k0s()(),e.j41(9,"div",6)(10,"table",7)(11,"thead",8)(12,"tr")(13,"th",9),e.EFF(14,"Imovel"),e.k0s(),e.j41(15,"th",9),e.EFF(16,"Contrato"),e.k0s(),e.j41(17,"th",9),e.EFF(18,"Data"),e.k0s(),e.j41(19,"th",9),e.EFF(20,"Tipo"),e.k0s(),e.j41(21,"th",9),e.EFF(22,"Avaliacao"),e.k0s()()(),e.j41(23,"tbody"),e.DNE(24,R,15,9,"tr",10),e.k0s()()()()),2&i&&(e.R7$(24),e.Y8G("ngForOf",n.vistorias()))},dependencies:[v.MD,v.Sq,v.bT,v.vh,I.Wk],encapsulation:2})}}return o})();var m=f(9417),E=f(8696),h=f(1413);let g=(()=>{class o{constructor(){this._lightboxEventSource=new h.B,this.lightboxEvent$=this._lightboxEventSource.asObservable()}broadcastLightboxEvent(t){this._lightboxEventSource.next(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac}),o})(),u=(()=>{class o{get nativeWindow(){return function c(){return window}()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac}),o})();var O=f(2578);let k=(()=>{class o{get isFileSaverSupported(){try{return!!new Blob}catch{return!1}}genType(t){if(!t||-1===t.lastIndexOf("."))return"text/plain";const i=t.substr(t.lastIndexOf(".")+1);switch(i){case"txt":return"text/plain";case"xml":case"html":return`text/${i}`;case"json":return"octet/stream";default:return`application/${i}`}}save(t,i,n,s){if(!t)throw new Error("Data argument should be a blob instance");const a=new Blob([t],{type:n||t.type||this.genType(i)});(0,O.saveAs)(a,decodeURI(i||"download"),s)}saveText(t,i,n){const s=new Blob([t]);this.save(s,i,void 0,n)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),S=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({}),o})();var x=f(345);const w=["outerContainer"],V=["container"],j=["leftArrow"],N=["rightArrow"],M=["navArrow"],$=["dataContainer"],G=["image"],H=["caption"],W=["number"],z=["lb-content",""];let P=(()=>{class o{constructor(t,i,n,s,a,d,_,p){this._elemRef=t,this._rendererRef=i,this._lightboxEvent=n,this._lightboxElem=s,this._lightboxWindowRef=a,this._fileSaverService=d,this._sanitizer=_,this._documentRef=p,this.options=this.options||{},this.album=this.album||[],this.currentImageIndex=this.currentImageIndex||0,this._windowRef=this._lightboxWindowRef.nativeWindow,this.ui={showReloader:!0,showLeftArrow:!1,showRightArrow:!1,showArrowNav:!1,showZoomButton:!1,showRotateButton:!1,showPageNumber:!1,showCaption:!1,showDownloadButton:!1,classList:"lightbox animation fadeIn"},this.content={pageNumber:""},this._event={},this._lightboxElem=this._elemRef,this._event.subscription=this._lightboxEvent.lightboxEvent$.subscribe(T=>this._onReceivedEvent(T)),this.rotate=0}ngOnInit(){this.album.forEach(t=>{t.caption&&(t.caption=this._sanitizer.sanitize(e.WPN.HTML,t.caption))})}ngAfterViewInit(){this._cssValue={containerTopPadding:Math.round(this._getCssStyleValue(this._containerElem,"padding-top")),containerRightPadding:Math.round(this._getCssStyleValue(this._containerElem,"padding-right")),containerBottomPadding:Math.round(this._getCssStyleValue(this._containerElem,"padding-bottom")),containerLeftPadding:Math.round(this._getCssStyleValue(this._containerElem,"padding-left")),imageBorderWidthTop:Math.round(this._getCssStyleValue(this._imageElem,"border-top-width")),imageBorderWidthBottom:Math.round(this._getCssStyleValue(this._imageElem,"border-bottom-width")),imageBorderWidthLeft:Math.round(this._getCssStyleValue(this._imageElem,"border-left-width")),imageBorderWidthRight:Math.round(this._getCssStyleValue(this._imageElem,"border-right-width"))},this._validateInputData()&&(this._prepareComponent(),this._registerImageLoadingEvent())}ngOnDestroy(){this.options.disableKeyboardNav||this._disableKeyboardNav(),this._event.subscription.unsubscribe()}close(t){t.stopPropagation(),(t.target.classList.contains("lightbox")||t.target.classList.contains("lb-loader")||t.target.classList.contains("lb-close"))&&this._lightboxEvent.broadcastLightboxEvent({id:2,data:null})}download(t){t.stopPropagation();const i=this.album[this.currentImageIndex].src,n=this.album[this.currentImageIndex].downloadUrl,s=i.split("/"),a=s[s.length-1],d=document.createElement("canvas"),_=d.getContext("2d"),p=new Image,T=this;p.onload=function(){d.width=this.naturalWidth,d.height=this.naturalHeight,_.drawImage(this,0,0),d.toBlob(function(Q){T._fileSaverService.save(Q,a)},"image/jpeg",.75)},p.crossOrigin="",p.src=this._sanitizer.sanitize(e.WPN.URL,n&&n.length>0?n:i)}control(t){let i,n;t.stopPropagation(),t.target.classList.contains("lb-turnLeft")?(this.rotate=this.rotate-90,this._rotateContainer(),this._calcTransformPoint(),this._documentRef.getElementById("image").style.transform=`rotate(${this.rotate}deg)`,this._documentRef.getElementById("image").style.webkitTransform=`rotate(${this.rotate}deg)`,this._lightboxEvent.broadcastLightboxEvent({id:6,data:null})):t.target.classList.contains("lb-turnRight")?(this.rotate=this.rotate+90,this._rotateContainer(),this._calcTransformPoint(),this._documentRef.getElementById("image").style.transform=`rotate(${this.rotate}deg)`,this._documentRef.getElementById("image").style.webkitTransform=`rotate(${this.rotate}deg)`,this._lightboxEvent.broadcastLightboxEvent({id:7,data:null})):t.target.classList.contains("lb-zoomOut")?(i=parseInt(this._documentRef.getElementById("outerContainer").style.height,10)/1.5,n=parseInt(this._documentRef.getElementById("outerContainer").style.width,10)/1.5,this._documentRef.getElementById("outerContainer").style.height=i+"px",this._documentRef.getElementById("outerContainer").style.width=n+"px",i=parseInt(this._documentRef.getElementById("image").style.height,10)/1.5,n=parseInt(this._documentRef.getElementById("image").style.width,10)/1.5,this._documentRef.getElementById("image").style.height=i+"px",this._documentRef.getElementById("image").style.width=n+"px",this._lightboxEvent.broadcastLightboxEvent({id:5,data:null})):t.target.classList.contains("lb-zoomIn")&&(i=1.5*parseInt(this._documentRef.getElementById("outerContainer").style.height,10),n=1.5*parseInt(this._documentRef.getElementById("outerContainer").style.width,10),this._documentRef.getElementById("outerContainer").style.height=i+"px",this._documentRef.getElementById("outerContainer").style.width=n+"px",i=1.5*parseInt(this._documentRef.getElementById("image").style.height,10),n=1.5*parseInt(this._documentRef.getElementById("image").style.width,10),this._documentRef.getElementById("image").style.height=i+"px",this._documentRef.getElementById("image").style.width=n+"px",this._lightboxEvent.broadcastLightboxEvent({id:4,data:null}))}_rotateContainer(){let t=this.rotate;t<0&&(t*=-1),t/90%4==1||t/90%4==3?(this._documentRef.getElementById("outerContainer").style.height=this._documentRef.getElementById("image").style.width,this._documentRef.getElementById("outerContainer").style.width=this._documentRef.getElementById("image").style.height,this._documentRef.getElementById("container").style.height=this._documentRef.getElementById("image").style.width,this._documentRef.getElementById("container").style.width=this._documentRef.getElementById("image").style.height):(this._documentRef.getElementById("outerContainer").style.height=this._documentRef.getElementById("image").style.height,this._documentRef.getElementById("outerContainer").style.width=this._documentRef.getElementById("image").style.width,this._documentRef.getElementById("container").style.height=this._documentRef.getElementById("image").style.width,this._documentRef.getElementById("container").style.width=this._documentRef.getElementById("image").style.height)}_resetImage(){this.rotate=0,this._documentRef.getElementById("image").style.transform=`rotate(${this.rotate}deg)`,this._documentRef.getElementById("image").style.webkitTransform=`rotate(${this.rotate}deg)`}_calcTransformPoint(){let t=parseInt(this._documentRef.getElementById("image").style.height,10),i=parseInt(this._documentRef.getElementById("image").style.width,10),n=this.rotate%360;n<0&&(n=360+n),90===n?this._documentRef.getElementById("image").style.transformOrigin=t/2+"px "+t/2+"px":180===n?this._documentRef.getElementById("image").style.transformOrigin=i/2+"px "+t/2+"px":270===n&&(this._documentRef.getElementById("image").style.transformOrigin=i/2+"px "+i/2+"px")}nextImage(){1!==this.album.length&&this._changeImage(this.currentImageIndex===this.album.length-1?0:this.currentImageIndex+1)}prevImage(){1!==this.album.length&&this._changeImage(0===this.currentImageIndex&&this.album.length>1?this.album.length-1:this.currentImageIndex-1)}_validateInputData(){if(!(this.album&&this.album instanceof Array&&this.album.length>0))throw new Error("No album data or album data is not correct in type");for(let t=0;t<this.album.length;t++)if(!this.album[t].src)throw new Error("One of the album data does not have source data");if(isNaN(this.currentImageIndex))throw new Error("Current image index is not a number");return this.currentImageIndex=Number(this.currentImageIndex),!0}_registerImageLoadingEvent(){const t=new Image;t.onload=()=>{this._onLoadImageSuccess()},t.src=this._sanitizer.sanitize(e.WPN.URL,this.album[this.currentImageIndex].src)}_onLoadImageSuccess(){let t,i,n,s,a,d,_,p;this.options.disableKeyboardNav||this._disableKeyboardNav(),i=_=this._imageElem.nativeElement.naturalWidth,t=p=this._imageElem.nativeElement.naturalHeight,this.options.fitImageInViewPort&&(d=this._windowRef.innerWidth,a=this._windowRef.innerHeight,s=d-this._cssValue.containerLeftPadding-this._cssValue.containerRightPadding-this._cssValue.imageBorderWidthLeft-this._cssValue.imageBorderWidthRight-20,n=a-this._cssValue.containerTopPadding-this._cssValue.containerTopPadding-this._cssValue.imageBorderWidthTop-this._cssValue.imageBorderWidthBottom-120,(_>s||p>n)&&(_/s>p/n?(i=s,t=Math.round(p/(_/i))):(t=n,i=Math.round(_/(p/t)))),this._rendererRef.setStyle(this._imageElem.nativeElement,"width",`${i}px`),this._rendererRef.setStyle(this._imageElem.nativeElement,"height",`${t}px`)),this._sizeContainer(i,t),this.options.centerVertically&&this._centerVertically(i,t)}_centerVertically(t,i){this._rendererRef.setStyle(this._lightboxElem.nativeElement,"top",`${this._documentRef.documentElement.scrollTop+(this._windowRef.innerHeight/2-i/2)}px`)}_sizeContainer(t,i){const s=this._outerContainerElem.nativeElement.offsetHeight,a=t+this._cssValue.containerRightPadding+this._cssValue.containerLeftPadding+this._cssValue.imageBorderWidthLeft+this._cssValue.imageBorderWidthRight,d=i+this._cssValue.containerTopPadding+this._cssValue.containerBottomPadding+this._cssValue.imageBorderWidthTop+this._cssValue.imageBorderWidthBottom;Math.abs(this._outerContainerElem.nativeElement.offsetWidth-a)+Math.abs(s-d)>5?(this._rendererRef.setStyle(this._outerContainerElem.nativeElement,"width",`${a}px`),this._rendererRef.setStyle(this._outerContainerElem.nativeElement,"height",`${d}px`),this.options.enableTransition?(this._event.transitions=[],["transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd"].forEach(_=>{this._event.transitions.push(this._rendererRef.listen(this._outerContainerElem.nativeElement,_,p=>{p.target===p.currentTarget&&this._postResize(a,d)}))})):this._postResize(a,d)):this._postResize(a,d)}_postResize(t,i){Array.isArray(this._event.transitions)&&(this._event.transitions.forEach(n=>{n()}),this._event.transitions=[]),this._rendererRef.setStyle(this._dataContainerElem.nativeElement,"width",`${t}px`),this._showImage()}_showImage(){this.ui.showReloader=!1,this._updateNav(),this._updateDetails(),this.options.disableKeyboardNav||this._enableKeyboardNav()}_prepareComponent(){this._addCssAnimation(),this._positionLightBox(),setTimeout(()=>{this.ui.showZoomButton=this.options.showZoom,this.ui.showRotateButton=this.options.showRotate,this.ui.showDownloadButton=this.options.showDownloadButton},0)}_positionLightBox(){const i=this._windowRef.pageXOffset||this._documentRef.documentElement.scrollLeft;this.options.centerVertically||this._rendererRef.setStyle(this._lightboxElem.nativeElement,"top",`${(this._windowRef.pageYOffset||this._documentRef.documentElement.scrollTop)+this.options.positionFromTop}px`),this._rendererRef.setStyle(this._lightboxElem.nativeElement,"left",`${i}px`),this._rendererRef.setStyle(this._lightboxElem.nativeElement,"display","block"),this.options.disableScrolling&&this._rendererRef.addClass(this._documentRef.documentElement,"lb-disable-scrolling")}_addCssAnimation(){const t=this.options.resizeDuration,i=this.options.fadeDuration;this._rendererRef.setStyle(this._lightboxElem.nativeElement,"-webkit-animation-duration",`${i}s`),this._rendererRef.setStyle(this._lightboxElem.nativeElement,"animation-duration",`${i}s`),this._rendererRef.setStyle(this._outerContainerElem.nativeElement,"-webkit-transition-duration",`${t}s`),this._rendererRef.setStyle(this._outerContainerElem.nativeElement,"transition-duration",`${t}s`),this._rendererRef.setStyle(this._dataContainerElem.nativeElement,"-webkit-animation-duration",`${i}s`),this._rendererRef.setStyle(this._dataContainerElem.nativeElement,"animation-duration",`${i}s`),this._rendererRef.setStyle(this._imageElem.nativeElement,"-webkit-animation-duration",`${i}s`),this._rendererRef.setStyle(this._imageElem.nativeElement,"animation-duration",`${i}s`),this._rendererRef.setStyle(this._captionElem.nativeElement,"-webkit-animation-duration",`${i}s`),this._rendererRef.setStyle(this._captionElem.nativeElement,"animation-duration",`${i}s`),this._rendererRef.setStyle(this._numberElem.nativeElement,"-webkit-animation-duration",`${i}s`),this._rendererRef.setStyle(this._numberElem.nativeElement,"animation-duration",`${i}s`)}_end(){this.ui.classList="lightbox animation fadeOut",this.options.disableScrolling&&this._rendererRef.removeClass(this._documentRef.documentElement,"lb-disable-scrolling"),setTimeout(()=>{this.cmpRef.destroy()},1e3*this.options.fadeDuration)}_updateDetails(){typeof this.album[this.currentImageIndex].caption<"u"&&""!==this.album[this.currentImageIndex].caption&&(this.ui.showCaption=!0),this.album.length>1&&this.options.showImageNumberLabel&&(this.ui.showPageNumber=!0,this.content.pageNumber=this._albumLabel())}_albumLabel(){return this.options.albumLabel.replace(/%1/g,Number(this.currentImageIndex+1)).replace(/%2/g,this.album.length)}_changeImage(t){this._resetImage(),this.currentImageIndex=t,this._hideImage(),this._registerImageLoadingEvent(),this._lightboxEvent.broadcastLightboxEvent({id:1,data:t})}_hideImage(){this.ui.showReloader=!0,this.ui.showArrowNav=!1,this.ui.showLeftArrow=!1,this.ui.showRightArrow=!1,this.ui.showPageNumber=!1,this.ui.showCaption=!1}_updateNav(){let t=!1;try{this._documentRef.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch{}this._showArrowNav(),this.album.length>1&&(this.options.wrapAround?(t&&(this._rendererRef.setStyle(this._leftArrowElem.nativeElement,"opacity","1"),this._rendererRef.setStyle(this._rightArrowElem.nativeElement,"opacity","1")),this._showLeftArrowNav(),this._showRightArrowNav()):(this.currentImageIndex>0&&(this._showLeftArrowNav(),t&&this._rendererRef.setStyle(this._leftArrowElem.nativeElement,"opacity","1")),this.currentImageIndex<this.album.length-1&&(this._showRightArrowNav(),t&&this._rendererRef.setStyle(this._rightArrowElem.nativeElement,"opacity","1"))))}_showLeftArrowNav(){this.ui.showLeftArrow=!0}_showRightArrowNav(){this.ui.showRightArrow=!0}_showArrowNav(){this.ui.showArrowNav=1!==this.album.length}_enableKeyboardNav(){this._event.keyup=this._rendererRef.listen("document","keyup",t=>{this._keyboardAction(t)})}_disableKeyboardNav(){this._event.keyup&&this._event.keyup()}_keyboardAction(t){const a=t.keyCode,d=String.fromCharCode(a).toLowerCase();27===a||d.match(/x|o|c/)?this._lightboxEvent.broadcastLightboxEvent({id:2,data:null}):"p"===d||37===a?0!==this.currentImageIndex?this._changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this._changeImage(this.album.length-1):("n"===d||39===a)&&(this.currentImageIndex!==this.album.length-1?this._changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this._changeImage(0))}_getCssStyleValue(t,i){return parseFloat(this._windowRef.getComputedStyle(t.nativeElement,null).getPropertyValue(i))}_onReceivedEvent(t){2===t.id&&this._end()}}return o.\u0275fac=function(t){return new(t||o)(e.rXU(e.aKT),e.rXU(e.sFG),e.rXU(g),e.rXU(e.aKT),e.rXU(u),e.rXU(k),e.rXU(x.up),e.rXU(v.qQ))},o.\u0275cmp=e.VBU({type:o,selectors:[["","lb-content",""]],viewQuery:function(t,i){if(1&t&&(e.GBs(w,5),e.GBs(V,5),e.GBs(j,5),e.GBs(N,5),e.GBs(M,5),e.GBs($,5),e.GBs(G,5),e.GBs(H,5),e.GBs(W,5)),2&t){let n;e.mGM(n=e.lsd())&&(i._outerContainerElem=n.first),e.mGM(n=e.lsd())&&(i._containerElem=n.first),e.mGM(n=e.lsd())&&(i._leftArrowElem=n.first),e.mGM(n=e.lsd())&&(i._rightArrowElem=n.first),e.mGM(n=e.lsd())&&(i._navArrowElem=n.first),e.mGM(n=e.lsd())&&(i._dataContainerElem=n.first),e.mGM(n=e.lsd())&&(i._imageElem=n.first),e.mGM(n=e.lsd())&&(i._captionElem=n.first),e.mGM(n=e.lsd())&&(i._numberElem=n.first)}},hostVars:2,hostBindings:function(t,i){1&t&&e.bIt("click",function(s){return i.close(s)}),2&t&&e.HbH(i.ui.classList)},inputs:{album:"album",currentImageIndex:"currentImageIndex",options:"options",cmpRef:"cmpRef"},attrs:z,decls:34,vars:14,consts:[["id","outerContainer",1,"lb-outerContainer","transition"],["outerContainer",""],["id","container",1,"lb-container"],["container",""],["id","image",1,"lb-image","animation","fadeIn",3,"src","hidden"],["image",""],[1,"lb-nav",3,"hidden"],["navArrow",""],[1,"lb-prev",3,"hidden","click"],["leftArrow",""],[1,"lb-next",3,"hidden","click"],["rightArrow",""],[1,"lb-loader",3,"hidden","click"],[1,"lb-cancel"],[1,"lb-dataContainer",3,"hidden"],["dataContainer",""],[1,"lb-data"],[1,"lb-details"],[1,"lb-caption","animation","fadeIn",3,"hidden","innerHtml"],["caption",""],[1,"lb-number","animation","fadeIn",3,"hidden"],["number",""],[1,"lb-controlContainer"],[1,"lb-closeContainer"],[1,"lb-close",3,"click"],[1,"lb-downloadContainer",3,"hidden"],[1,"lb-download",3,"click"],[1,"lb-turnContainer",3,"hidden"],[1,"lb-turnLeft",3,"click"],[1,"lb-turnRight",3,"click"],[1,"lb-zoomContainer",3,"hidden"],[1,"lb-zoomOut",3,"click"],[1,"lb-zoomIn",3,"click"]],template:function(t,i){1&t&&(e.j41(0,"div",0,1)(2,"div",2,3),e.nrm(4,"img",4,5),e.j41(6,"div",6,7)(8,"a",8,9),e.bIt("click",function(){return i.prevImage()}),e.k0s(),e.j41(10,"a",10,11),e.bIt("click",function(){return i.nextImage()}),e.k0s()(),e.j41(12,"div",12),e.bIt("click",function(s){return i.close(s)}),e.nrm(13,"a",13),e.k0s()()(),e.j41(14,"div",14,15)(16,"div",16)(17,"div",17),e.nrm(18,"span",18,19),e.j41(20,"span",20,21),e.EFF(22),e.k0s()(),e.j41(23,"div",22)(24,"div",23)(25,"a",24),e.bIt("click",function(s){return i.close(s)}),e.k0s()(),e.j41(26,"div",25)(27,"a",26),e.bIt("click",function(s){return i.download(s)}),e.k0s()(),e.j41(28,"div",27)(29,"a",28),e.bIt("click",function(s){return i.control(s)}),e.k0s(),e.j41(30,"a",29),e.bIt("click",function(s){return i.control(s)}),e.k0s()(),e.j41(31,"div",30)(32,"a",31),e.bIt("click",function(s){return i.control(s)}),e.k0s(),e.j41(33,"a",32),e.bIt("click",function(s){return i.control(s)}),e.k0s()()()()()),2&t&&(e.R7$(4),e.Y8G("src",i.album[i.currentImageIndex].src,e.B4B)("hidden",i.ui.showReloader),e.R7$(2),e.Y8G("hidden",!i.ui.showArrowNav),e.R7$(2),e.Y8G("hidden",!i.ui.showLeftArrow),e.R7$(2),e.Y8G("hidden",!i.ui.showRightArrow),e.R7$(2),e.Y8G("hidden",!i.ui.showReloader),e.R7$(2),e.Y8G("hidden",i.ui.showReloader),e.R7$(4),e.Y8G("hidden",!i.ui.showCaption)("innerHtml",i.album[i.currentImageIndex].caption,e.npT),e.R7$(2),e.Y8G("hidden",!i.ui.showPageNumber),e.R7$(2),e.JRh(i.content.pageNumber),e.R7$(4),e.Y8G("hidden",!i.ui.showDownloadButton),e.R7$(2),e.Y8G("hidden",!i.ui.showRotateButton),e.R7$(3),e.Y8G("hidden",!i.ui.showZoomButton))},encapsulation:2}),o})(),A=(()=>{class o{constructor(){this.fadeDuration=.7,this.resizeDuration=.5,this.fitImageInViewPort=!0,this.positionFromTop=20,this.showImageNumberLabel=!1,this.alwaysShowNavOnTouchDevices=!1,this.wrapAround=!1,this.disableKeyboardNav=!1,this.disableScrolling=!1,this.centerVertically=!1,this.enableTransition=!0,this.albumLabel="Image %1 of %2",this.showZoom=!1,this.showRotate=!1,this.containerElementResolver=t=>t.querySelector("body")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac}),o})();const U=["lb-overlay",""];let Y=(()=>{class o{constructor(t,i,n,s){this._elemRef=t,this._rendererRef=i,this._lightboxEvent=n,this._documentRef=s,this.classList="lightboxOverlay animation fadeInOverlay",this._subscription=this._lightboxEvent.lightboxEvent$.subscribe(a=>this._onReceivedEvent(a))}close(){this._lightboxEvent.broadcastLightboxEvent({id:2,data:null})}ngAfterViewInit(){const t=this.options.fadeDuration;this._rendererRef.setStyle(this._elemRef.nativeElement,"-webkit-animation-duration",`${t}s`),this._rendererRef.setStyle(this._elemRef.nativeElement,"animation-duration",`${t}s`),this._sizeOverlay()}onResize(){this._sizeOverlay()}ngOnDestroy(){this._subscription.unsubscribe()}_sizeOverlay(){const t=this._getOverlayWidth(),i=this._getOverlayHeight();this._rendererRef.setStyle(this._elemRef.nativeElement,"width",`${t}px`),this._rendererRef.setStyle(this._elemRef.nativeElement,"height",`${i}px`)}_onReceivedEvent(t){2===t.id&&this._end()}_end(){this.classList="lightboxOverlay animation fadeOutOverlay",setTimeout(()=>{this.cmpRef.destroy()},1e3*this.options.fadeDuration)}_getOverlayWidth(){return Math.max(this._documentRef.body.scrollWidth,this._documentRef.body.offsetWidth,this._documentRef.documentElement.clientWidth,this._documentRef.documentElement.scrollWidth,this._documentRef.documentElement.offsetWidth)}_getOverlayHeight(){return Math.max(this._documentRef.body.scrollHeight,this._documentRef.body.offsetHeight,this._documentRef.documentElement.clientHeight,this._documentRef.documentElement.scrollHeight,this._documentRef.documentElement.offsetHeight)}}return o.\u0275fac=function(t){return new(t||o)(e.rXU(e.aKT),e.rXU(e.sFG),e.rXU(g),e.rXU(v.qQ))},o.\u0275cmp=e.VBU({type:o,selectors:[["","lb-overlay",""]],hostVars:2,hostBindings:function(t,i){1&t&&e.bIt("click",function(){return i.close()})("resize",function(){return i.onResize()},!1,e.tSv),2&t&&e.HbH(i.classList)},inputs:{options:"options",cmpRef:"cmpRef"},attrs:U,decls:0,vars:0,template:function(t,i){},encapsulation:2}),o})(),K=(()=>{class o{constructor(t,i,n,s,a,d){this._componentFactoryResolver=t,this._injector=i,this._applicationRef=n,this._lightboxConfig=s,this._lightboxEvent=a,this._documentRef=d}open(t,i=0,n={}){const s=this._createComponent(Y),a=this._createComponent(P),d={};this._lightboxEvent.broadcastLightboxEvent({id:3}),Object.assign(d,this._lightboxConfig,n),a.instance.album=t,a.instance.currentImageIndex=i,a.instance.options=d,a.instance.cmpRef=a,s.instance.options=d,s.instance.cmpRef=s,setTimeout(()=>{this._applicationRef.attachView(s.hostView),this._applicationRef.attachView(a.hostView),s.onDestroy(()=>{this._applicationRef.detachView(s.hostView)}),a.onDestroy(()=>{this._applicationRef.detachView(a.hostView)});const _=d.containerElementResolver(this._documentRef);_.appendChild(s.location.nativeElement),_.appendChild(a.location.nativeElement)})}close(){this._lightboxEvent&&this._lightboxEvent.broadcastLightboxEvent({id:2})}_createComponent(t){return this._componentFactoryResolver.resolveComponentFactory(t).create(this._injector)}}return o.\u0275fac=function(t){return new(t||o)(e.KVO(e.OM3),e.KVO(e.zZn),e.KVO(e.o8S),e.KVO(A),e.KVO(g),e.KVO(v.qQ))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac}),o})(),X=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({providers:[K,A,g,u],imports:[S]}),o})();function q(o,l){if(1&o){const t=e.RV6();e.j41(0,"ngx-dropzone-preview",22),e.bIt("removed",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onRemove(n))}),e.j41(1,"ngx-dropzone-label"),e.EFF(2),e.k0s()()}if(2&o){const t=l.$implicit;e.Y8G("removable",!0),e.R7$(2),e.JRh(t.name)}}function Z(o,l){if(1&o){const t=e.RV6();e.j41(0,"a",23),e.bIt("click",function(){const n=e.eBV(t).index,s=e.XpG();return e.Njj(s.openLightbox(n))}),e.nrm(1,"img",24),e.j41(2,"span",25),e.EFF(3,"Ver"),e.k0s()()}if(2&o){const t=l.$implicit;e.R7$(),e.Y8G("src",t.thumb,e.B4B)}}let D=(()=>{class o{constructor(){this.fb=new m.ok,this.router=(0,e.WQX)(I.Ix),this.form=this.fb.nonNullable.group({imovelId:["",m.k0.required],contratoId:[""],dataVistoria:["",m.k0.required],tipo:["ENTRADA",m.k0.required],observacoes:[""],avaliacao:[null]}),this.files=(0,e.vPA)([]),this.previews=(0,e.vPA)([])}onSelect(t){const i=[...this.files(),...t.addedFiles];this.files.set(i),i.forEach(n=>this.createPreview(n))}onRemove(t){this.files.set(this.files().filter(i=>i!==t)),this.previews.set(this.previews().filter(i=>i.caption!==t.name))}openLightbox(t){const i=this.previews()[t];i?.src&&window.open(i.src,"_blank")}save(){this.form.invalid?this.form.markAllAsTouched():this.router.navigate(["/vistorias"])}createPreview(t){const i=new FileReader;i.onload=()=>{const n=i.result,s={src:n,thumb:n,caption:t.name};this.previews.set([...this.previews(),s])},i.readAsDataURL(t)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-vistoria-form"]],standalone:!0,features:[e.aNF],decls:48,vars:5,consts:[[1,"max-w-3xl","mx-auto","card"],[1,"text-2xl","font-semibold","text-primary","mb-6"],[1,"grid","md:grid-cols-2","gap-4",3,"formGroup"],[1,"text-sm","text-gray-400","block","mb-1"],["formControlName","imovelId","placeholder","ID do imovel",1,"input-control"],["formControlName","contratoId","placeholder","ID do contrato (opcional)",1,"input-control"],["type","date","formControlName","dataVistoria",1,"input-control"],["formControlName","tipo",1,"input-control"],["value","ENTRADA"],["value","SAIDA"],["value","ROTINA"],[1,"md:col-span-2"],["formControlName","observacoes","rows","4",1,"input-control"],["type","number","min","0","max","10","formControlName","avaliacao",1,"input-control"],[1,"text-sm","text-gray-400","block","mb-3"],[1,"bg-neutral","border","border-dashed","border-primary/40",3,"change","multiple"],[3,"removable","removed",4,"ngFor","ngForOf"],[1,"md:col-span-2","grid","grid-cols-2","md:grid-cols-4","gap-3"],["class","relative block group",3,"click",4,"ngFor","ngForOf"],[1,"md:col-span-2","flex","justify-end","gap-3"],["type","button",1,"btn-outline",3,"click"],["type","button",1,"btn-primary",3,"click","disabled"],[3,"removed","removable"],[1,"relative","block","group",3,"click"],["alt","foto vistoria",1,"rounded-lg","border","border-primary/20",3,"src"],[1,"absolute","inset-0","bg-black/40","opacity-0","group-hover:opacity-100","transition","flex","items-center","justify-center","text-xs"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Registro de vistoria"),e.k0s(),e.j41(3,"form",2)(4,"div")(5,"label",3),e.EFF(6,"Imovel"),e.k0s(),e.nrm(7,"input",4),e.k0s(),e.j41(8,"div")(9,"label",3),e.EFF(10,"Contrato"),e.k0s(),e.nrm(11,"input",5),e.k0s(),e.j41(12,"div")(13,"label",3),e.EFF(14,"Data da vistoria"),e.k0s(),e.nrm(15,"input",6),e.k0s(),e.j41(16,"div")(17,"label",3),e.EFF(18,"Tipo"),e.k0s(),e.j41(19,"select",7)(20,"option",8),e.EFF(21,"Entrada"),e.k0s(),e.j41(22,"option",9),e.EFF(23,"Saida"),e.k0s(),e.j41(24,"option",10),e.EFF(25,"Rotina"),e.k0s()()(),e.j41(26,"div",11)(27,"label",3),e.EFF(28,"Observacoes"),e.k0s(),e.nrm(29,"textarea",12),e.k0s(),e.j41(30,"div")(31,"label",3),e.EFF(32,"Avaliacao (0-10)"),e.k0s(),e.nrm(33,"input",13),e.k0s(),e.j41(34,"div",11)(35,"label",14),e.EFF(36,"Fotos da vistoria"),e.k0s(),e.j41(37,"ngx-dropzone",15),e.bIt("change",function(a){return n.onSelect(a)}),e.j41(38,"ngx-dropzone-label"),e.EFF(39," Arraste as fotos aqui ou clique para selecionar. "),e.k0s(),e.DNE(40,q,3,2,"ngx-dropzone-preview",16),e.k0s()(),e.j41(41,"div",17),e.DNE(42,Z,4,1,"a",18),e.k0s(),e.j41(43,"div",19)(44,"button",20),e.bIt("click",function(){return n.router.navigate(["/vistorias"])}),e.EFF(45,"Cancelar"),e.k0s(),e.j41(46,"button",21),e.bIt("click",function(){return n.save()}),e.EFF(47,"Salvar"),e.k0s()()()()),2&i&&(e.R7$(3),e.Y8G("formGroup",n.form),e.R7$(34),e.Y8G("multiple",!0),e.R7$(3),e.Y8G("ngForOf",n.files()),e.R7$(2),e.Y8G("ngForOf",n.previews()),e.R7$(4),e.Y8G("disabled",n.form.invalid))},dependencies:[v.MD,v.Sq,m.X1,m.qT,m.xH,m.y7,m.me,m.Q0,m.wz,m.BC,m.cb,m.VZ,m.zX,m.j4,m.JD,E.Fg,E.s3,E.Gt,E.YS,X],styles:[".input-control[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border-width:1px;border-color:#6366f14d;--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1));padding:.5rem .75rem}.input-control[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity, 1)) }ngx-dropzone[_ngcontent-%COMP%]{border-radius:.5rem;padding:1.5rem;text-align:center;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}"]})}}return o})();const J=[{path:"",component:b},{path:"nova",component:D},{path:"editar/:id",component:D}]},2578:function(B,C){var f,v;void 0!==(v="function"==typeof(f=function(){"use strict";function y(h,r,g){var c=new XMLHttpRequest;c.open("GET",h),c.responseType="blob",c.onload=function(){E(c.response,r,g)},c.onerror=function(){console.error("could not download file")},c.send()}function F(h){var r=new XMLHttpRequest;r.open("HEAD",h,!1);try{r.send()}catch{}return 200<=r.status&&299>=r.status}function R(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(r)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,m=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),E=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(h,r,g){var c=b.URL||b.webkitURL,u=document.createElement("a");u.download=r=r||h.name||"download",u.rel="noopener","string"==typeof h?(u.href=h,u.origin===location.origin?R(u):F(u.href)?y(h,r,g):R(u,u.target="_blank")):(u.href=c.createObjectURL(h),setTimeout(function(){c.revokeObjectURL(u.href)},4e4),setTimeout(function(){R(u)},0))}:"msSaveOrOpenBlob"in navigator?function(h,r,g){if(r=r||h.name||"download","string"!=typeof h)navigator.msSaveOrOpenBlob(function I(h,r){return typeof r>"u"?r={autoBom:!1}:"object"!=typeof r&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\ufeff",h],{type:h.type}):h}(h,g),r);else if(F(h))y(h,r,g);else{var c=document.createElement("a");c.href=h,c.target="_blank",setTimeout(function(){R(c)})}}:function(h,r,g,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof h)return y(h,r,g);var u="application/octet-stream"===h.type,O=/constructor/i.test(b.HTMLElement)||b.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||u&&O||m)&&typeof FileReader<"u"){var L=new FileReader;L.onloadend=function(){var w=L.result;w=k?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=w:location=w,c=null},L.readAsDataURL(h)}else{var S=b.URL||b.webkitURL,x=S.createObjectURL(h);c?c.location=x:location.href=x,c=null,setTimeout(function(){S.revokeObjectURL(x)},4e4)}});b.saveAs=E.saveAs=E,B.exports=E})?f.apply(C,[]):f)&&(B.exports=v)}}]);