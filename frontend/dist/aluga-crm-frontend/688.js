"use strict";(self.webpackChunkaluga_crm_frontend=self.webpackChunkaluga_crm_frontend||[]).push([[688],{5688:(j,d,n)=>{n.r(d),n.d(d,{IMOVEIS_ROUTES:()=>x});var t=n(4438),a=n(177),c=n(1569),h=n(6354),u=n(6344);let m=(()=>{class o{constructor(){this.api=(0,t.WQX)(u.G)}list(){return this.api.get("/imoveis",{size:1e3}).pipe((0,h.T)(e=>e.content??[]))}find(e){return this.api.get(`/imoveis/${e}`)}create(e){return this.api.post("/imoveis",e)}update(e,i){return this.api.put(`/imoveis/${e}`,i)}remove(e){return this.api.delete(`/imoveis/${e}`)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var v=n(5567);const g=o=>["editar",o];function F(o,l){if(1&o){const e=t.RV6();t.j41(0,"tr",12)(1,"td",8),t.EFF(2),t.k0s(),t.j41(3,"td",8),t.EFF(4),t.k0s(),t.j41(5,"td",8),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.j41(8,"td",8)(9,"span",13),t.EFF(10),t.k0s()(),t.j41(11,"td",14)(12,"a",15),t.EFF(13,"Editar"),t.k0s(),t.j41(14,"button",16),t.bIt("click",function(){const s=t.eBV(e).$implicit,p=t.XpG();return t.Njj(p.remove(s.id))}),t.EFF(15," Remover "),t.k0s()()()}if(2&o){const e=l.$implicit;t.R7$(2),t.JRh(e.endereco),t.R7$(2),t.JRh(e.tipo),t.R7$(2),t.JRh(t.ii3(7,5,e.valorAluguel,"BRL","symbol","1.0-2")),t.R7$(4),t.SpI(" ",e.status," "),t.R7$(2),t.Y8G("routerLink",t.eq3(10,g,e.id))}}function b(o,l){1&o&&(t.j41(0,"p",17),t.EFF(1," Nenhum imovel cadastrado. "),t.k0s())}let k=(()=>{class o{constructor(){this.service=(0,t.WQX)(m),this.notification=(0,t.WQX)(v.J),this.imoveis=(0,t.vPA)([]),this.loading=(0,t.vPA)(!1)}ngOnInit(){this.load()}load(){this.loading.set(!0),this.service.list().subscribe({next:e=>{this.imoveis.set(e),this.loading.set(!1)},error:()=>{this.loading.set(!1),this.notification.error("Nao foi possivel carregar os imoveis.")}})}remove(e){e&&this.service.remove(e).subscribe({next:()=>{this.notification.success("Imovel removido com sucesso."),this.load()},error:()=>this.notification.error("Falha ao remover o imovel.")})}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-imovel-list"]],standalone:!0,features:[t.aNF],decls:26,vars:2,consts:[[1,"space-y-6"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"text-2xl","font-semibold","text-primary"],[1,"text-sm","text-gray-400"],["routerLink","novo",1,"btn-primary","text-sm","w-full","md:w-auto","text-center"],[1,"card","overflow-x-auto"],[1,"min-w-full","text-left","text-sm"],[1,"text-xs","uppercase","text-gray-400","border-b","border-primary/20"],[1,"py-3"],[1,"py-3","text-right"],["class","border-b border-primary/10",4,"ngFor","ngForOf"],["class","text-center text-gray-500 py-6",4,"ngIf"],[1,"border-b","border-primary/10"],[1,"px-2","py-1","rounded-full","text-xs","bg-primary/10","text-primary"],[1,"py-3","text-right","flex","gap-2","justify-end"],[1,"btn-outline","text-xs","px-3","py-1",3,"routerLink"],[1,"btn-outline","text-xs","px-3","py-1","border-rose-400","text-rose-400","hover:bg-rose-500/10",3,"click"],[1,"text-center","text-gray-500","py-6"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),t.EFF(4,"Imoveis"),t.k0s(),t.j41(5,"p",3),t.EFF(6,"Gerencie imoveis e disponibilidade."),t.k0s()(),t.j41(7,"a",4),t.EFF(8,"Novo Imovel"),t.k0s()(),t.j41(9,"div",5)(10,"table",6)(11,"thead",7)(12,"tr")(13,"th",8),t.EFF(14,"Endereco"),t.k0s(),t.j41(15,"th",8),t.EFF(16,"Tipo"),t.k0s(),t.j41(17,"th",8),t.EFF(18,"Valor"),t.k0s(),t.j41(19,"th",8),t.EFF(20,"Status"),t.k0s(),t.j41(21,"th",9),t.EFF(22,"Acoeses"),t.k0s()()(),t.j41(23,"tbody"),t.DNE(24,F,16,12,"tr",10),t.k0s()(),t.DNE(25,b,2,0,"p",11),t.k0s()()),2&i&&(t.R7$(24),t.Y8G("ngForOf",s.imoveis()),t.R7$(),t.Y8G("ngIf",!s.loading()&&!s.imoveis().length))},dependencies:[a.MD,a.Sq,a.bT,a.oe,c.Wk],encapsulation:2})}}return o})();var r=n(9417);function E(o,l){if(1&o&&(t.j41(0,"option",26),t.EFF(1),t.k0s()),2&o){const e=l.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.nome," ")}}let f=(()=>{class o{constructor(){this.fb=(0,t.WQX)(r.ok),this.service=(0,t.WQX)(m),this.router=(0,t.WQX)(c.Ix),this.route=(0,t.WQX)(c.nX),this.notification=(0,t.WQX)(v.J),this.api=(0,t.WQX)(u.G),this.editing=(0,t.vPA)(!1),this.pending=(0,t.vPA)(!1),this.predios=(0,t.vPA)([]),this.form=this.fb.nonNullable.group({endereco:["",r.k0.required],tipo:["APARTAMENTO",r.k0.required],valorAluguel:[0,r.k0.required],status:["DISPONIVEL",r.k0.required],descricao:[""],predioId:[null]})}ngOnInit(){this.loadPredios();const e=Number(this.route.snapshot.paramMap.get("id"));e&&(this.editing.set(!0),this.service.find(e).subscribe({next:i=>{this.form.patchValue({endereco:i.endereco,tipo:i.tipo,valorAluguel:i.valorAluguel,status:i.status,descricao:i.descricao??"",predioId:i.predio?.id??null})},error:()=>this.notification.error("Nao foi possivel carregar o imovel.")}))}submit(){if(this.form.invalid)return void this.form.markAllAsTouched();this.pending.set(!0);const e=Number(this.route.snapshot.paramMap.get("id")),i={...this.form.getRawValue(),predioId:this.form.value.predioId};(this.editing()?this.service.update(e,i):this.service.create(i)).subscribe({next:()=>{this.pending.set(!1),this.notification.success("Imovel salvo com sucesso."),this.router.navigate(["/imoveis"])},error:()=>{this.pending.set(!1),this.notification.error("Erro ao salvar o imovel.")}})}loadPredios(){this.api.get("/predios",{size:1e3}).subscribe({next:e=>this.predios.set(e.content??[]),error:()=>this.notification.warning("Nao foi possivel carregar os predios.")})}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-imovel-form"]],standalone:!0,features:[t.aNF],decls:56,vars:6,consts:[[1,"max-w-3xl","mx-auto","card"],[1,"text-2xl","font-semibold","text-primary","mb-6"],[1,"grid","md:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"md:col-span-2"],[1,"text-sm","text-gray-400","block","mb-1"],["formControlName","endereco",1,"input-control"],["formControlName","tipo",1,"input-control"],["value","APARTAMENTO"],["value","CASA"],["value","SALA_COMERCIAL"],["value","TERRENO"],["value","GALPAO"],["value","OUTRO"],["type","number","formControlName","valorAluguel",1,"input-control"],["formControlName","status",1,"input-control"],["value","DISPONIVEL"],["value","ALUGADO"],["value","MANUTENCAO"],["value","INATIVO"],["formControlName","predioId",1,"input-control"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["formControlName","descricao","rows","4",1,"input-control"],[1,"md:col-span-2","flex","justify-end","gap-3"],["type","button",1,"btn-outline",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[3,"value"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2),t.k0s(),t.j41(3,"form",2),t.bIt("ngSubmit",function(){return s.submit()}),t.j41(4,"div",3)(5,"label",4),t.EFF(6,"Endereco"),t.k0s(),t.nrm(7,"input",5),t.k0s(),t.j41(8,"div")(9,"label",4),t.EFF(10,"Tipo"),t.k0s(),t.j41(11,"select",6)(12,"option",7),t.EFF(13,"Apartamento"),t.k0s(),t.j41(14,"option",8),t.EFF(15,"Casa"),t.k0s(),t.j41(16,"option",9),t.EFF(17,"Sala Comercial"),t.k0s(),t.j41(18,"option",10),t.EFF(19,"Terreno"),t.k0s(),t.j41(20,"option",11),t.EFF(21,"Galpao"),t.k0s(),t.j41(22,"option",12),t.EFF(23,"Outro"),t.k0s()()(),t.j41(24,"div")(25,"label",4),t.EFF(26,"Valor de aluguel"),t.k0s(),t.nrm(27,"input",13),t.k0s(),t.j41(28,"div")(29,"label",4),t.EFF(30,"Status"),t.k0s(),t.j41(31,"select",14)(32,"option",15),t.EFF(33,"Disponivel"),t.k0s(),t.j41(34,"option",16),t.EFF(35,"Alugado"),t.k0s(),t.j41(36,"option",17),t.EFF(37,"Manutencao"),t.k0s(),t.j41(38,"option",18),t.EFF(39,"Inativo"),t.k0s()()(),t.j41(40,"div")(41,"label",4),t.EFF(42,"Predio"),t.k0s(),t.j41(43,"select",19)(44,"option",20),t.EFF(45,"Sem predio"),t.k0s(),t.DNE(46,E,2,2,"option",21),t.k0s()(),t.j41(47,"div",3)(48,"label",4),t.EFF(49,"Descricao"),t.k0s(),t.nrm(50,"textarea",22),t.k0s(),t.j41(51,"div",23)(52,"button",24),t.bIt("click",function(){return s.router.navigate(["/imoveis"])}),t.EFF(53," Cancelar "),t.k0s(),t.j41(54,"button",25),t.EFF(55),t.k0s()()()()),2&i&&(t.R7$(2),t.SpI(" ",s.editing()?"Editar imovel":"Novo imovel"," "),t.R7$(),t.Y8G("formGroup",s.form),t.R7$(41),t.Y8G("ngValue",null),t.R7$(2),t.Y8G("ngForOf",s.predios()),t.R7$(8),t.Y8G("disabled",s.form.invalid||s.pending()),t.R7$(),t.SpI(" ",s.pending()?"Salvando...":"Salvar"," "))},dependencies:[a.MD,a.Sq,r.X1,r.qT,r.xH,r.y7,r.me,r.Q0,r.wz,r.BC,r.cb,r.j4,r.JD],styles:[".input-control[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border-width:1px;border-color:#6366f14d;--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1));padding:.5rem .75rem}.input-control[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity, 1)) }"]})}}return o})();const x=[{path:"",component:k},{path:"novo",component:f},{path:"editar/:id",component:f}]}}]);