"use strict";(self.webpackChunkaluga_crm_frontend=self.webpackChunkaluga_crm_frontend||[]).push([[152],{1152:(F,c,i)=>{i.r(c),i.d(c,{RELATORIOS_ROUTES:()=>u});var t=i(4438),l=i(177),d=i(6344),f=i(5567);function m(e,x){if(1&e&&(t.j41(0,"li"),t.EFF(1),t.k0s()),2&e){const o=x.$implicit;t.R7$(),t.SpI(" ",o," ")}}const u=[{path:"",component:(()=>{class e{constructor(){this.api=(0,t.WQX)(d.G),this.notification=(0,t.WQX)(f.J),this.historico=(0,t.vPA)([])}exportar(o){this.api.download("pdf"===o?"/relatorios/financeiro/pdf":"/relatorios/financeiro/excel").subscribe({next:r=>{const h=new Blob([r],{type:"pdf"===o?"application/pdf":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),p=window.URL.createObjectURL(h),s=document.createElement("a");s.href=p,s.download="pdf"===o?"relatorio-financeiro.pdf":"relatorio-financeiro.xlsx",s.click(),window.URL.revokeObjectURL(p),this.notification.success(`Relatorio ${o.toUpperCase()} gerado com sucesso.`),this.historico.set([`${(new Date).toLocaleString()} - exportado ${o.toUpperCase()}`,...this.historico()])},error:()=>this.notification.error("Falha ao gerar relatorio.")})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-relatorio"]],standalone:!0,features:[t.aNF],decls:21,vars:1,consts:[[1,"space-y-6"],[1,"text-2xl","font-semibold","text-primary"],[1,"text-sm","text-gray-400"],[1,"card","space-y-4"],[1,"text-lg","font-semibold"],[1,"flex","flex-wrap","gap-3"],["type","button",1,"btn-primary",3,"click"],["type","button",1,"btn-outline",3,"click"],[1,"text-xs","text-gray-500"],[1,"space-y-2","text-sm","text-gray-400"],[4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"div")(2,"h1",1),t.EFF(3,"Relatorios gerenciais"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Exporte dados em PDF e Excel com filtros personalizados."),t.k0s()(),t.j41(6,"section",3)(7,"h2",4),t.EFF(8,"Relatorio financeiro"),t.k0s(),t.j41(9,"div",5)(10,"button",6),t.bIt("click",function(){return r.exportar("pdf")}),t.EFF(11," Exportar PDF "),t.k0s(),t.j41(12,"button",7),t.bIt("click",function(){return r.exportar("excel")}),t.EFF(13," Exportar Excel "),t.k0s()(),t.j41(14,"p",8),t.EFF(15," Os relatorios incluem receitas, despesas, contratos e inadimplencias agrupadas por periodo. "),t.k0s()(),t.j41(16,"section",3)(17,"h2",4),t.EFF(18,"Historico de exportacoes"),t.k0s(),t.j41(19,"ul",9),t.DNE(20,m,2,1,"li",10),t.k0s()()()),2&n&&(t.R7$(20),t.Y8G("ngForOf",r.historico()))},dependencies:[l.MD,l.Sq],encapsulation:2})}}return e})()}]}}]);