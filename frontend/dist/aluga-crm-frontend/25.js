"use strict";(self.webpackChunkaluga_crm_frontend=self.webpackChunkaluga_crm_frontend||[]).push([[25],{5025:(j,m,s)=>{s.r(m),s.d(m,{INQUILINOS_ROUTES:()=>E});var t=s(4438),a=s(177),u=s(1569),p=s(6354),d=s(6344);let f=(()=>{class e{constructor(){this.api=(0,t.WQX)(d.G)}list(){return this.api.get("/inquilinos",{size:1e3}).pipe((0,p.T)(i=>i.content??[]))}find(i){return this.api.get(`/inquilinos/${i}`)}create(i){return this.api.post("/inquilinos",i)}update(i,o){return this.api.put(`/inquilinos/${i}`,o)}remove(i){return this.api.delete(`/inquilinos/${i}`)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var h=s(5567);const g=e=>["editar",e];function F(e,l){if(1&e){const i=t.RV6();t.j41(0,"tr",12)(1,"td",8)(2,"div",13),t.EFF(3),t.k0s(),t.j41(4,"div",14),t.EFF(5),t.k0s()(),t.j41(6,"td",8),t.EFF(7),t.k0s(),t.j41(8,"td",8),t.EFF(9),t.k0s(),t.j41(10,"td",8),t.EFF(11),t.k0s(),t.j41(12,"td",15)(13,"a",16),t.EFF(14,"Editar"),t.k0s(),t.j41(15,"button",17),t.bIt("click",function(){const r=t.eBV(i).$implicit,c=t.XpG();return t.Njj(c.remove(r.id))}),t.EFF(16," Remover "),t.k0s()()()}if(2&e){const i=l.$implicit;t.R7$(3),t.JRh(i.nome),t.R7$(2),t.SpI("Usuario: ",(null==i.usuario?null:i.usuario.email)||"Nao vinculado",""),t.R7$(2),t.JRh(i.cpf),t.R7$(2),t.JRh(i.email),t.R7$(2),t.JRh(i.telefone||"-"),t.R7$(2),t.Y8G("routerLink",t.eq3(6,g,i.id))}}function b(e,l){1&e&&(t.j41(0,"p",18),t.EFF(1," Nenhum inquilino cadastrado. "),t.k0s())}let k=(()=>{class e{constructor(){this.service=(0,t.WQX)(f),this.notification=(0,t.WQX)(h.J),this.inquilinos=(0,t.vPA)([])}ngOnInit(){this.load()}load(){this.service.list().subscribe({next:i=>this.inquilinos.set(i),error:()=>this.notification.error("Nao foi possivel carregar os inquilinos.")})}remove(i){i&&this.service.remove(i).subscribe({next:()=>{this.notification.success("Inquilino removido com sucesso."),this.load()},error:()=>this.notification.error("Falha ao remover o inquilino.")})}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-inquilino-list"]],standalone:!0,features:[t.aNF],decls:26,vars:2,consts:[[1,"space-y-6"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"text-2xl","font-semibold","text-primary"],[1,"text-sm","text-gray-400"],["routerLink","novo",1,"btn-primary","text-sm","w-full","md:w-auto","text-center"],[1,"card","overflow-x-auto"],[1,"min-w-full","text-left","text-sm"],[1,"text-xs","uppercase","text-gray-400","border-b","border-primary/20"],[1,"py-3"],[1,"py-3","text-right"],["class","border-b border-primary/10",4,"ngFor","ngForOf"],["class","text-center text-gray-500 py-6",4,"ngIf"],[1,"border-b","border-primary/10"],[1,"font-semibold","text-white"],[1,"text-xs","text-gray-400"],[1,"py-3","text-right","flex","gap-2","justify-end"],[1,"btn-outline","text-xs","px-3","py-1",3,"routerLink"],[1,"btn-outline","text-xs","px-3","py-1","border-rose-400","text-rose-400","hover:bg-rose-500/10",3,"click"],[1,"text-center","text-gray-500","py-6"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),t.EFF(4,"Inquilinos"),t.k0s(),t.j41(5,"p",3),t.EFF(6,"Gerencie cadastros e vinculos de contratos."),t.k0s()(),t.j41(7,"a",4),t.EFF(8,"Novo Inquilino"),t.k0s()(),t.j41(9,"div",5)(10,"table",6)(11,"thead",7)(12,"tr")(13,"th",8),t.EFF(14,"Nome"),t.k0s(),t.j41(15,"th",8),t.EFF(16,"CPF"),t.k0s(),t.j41(17,"th",8),t.EFF(18,"Email"),t.k0s(),t.j41(19,"th",8),t.EFF(20,"Telefone"),t.k0s(),t.j41(21,"th",9),t.EFF(22,"Acoeses"),t.k0s()()(),t.j41(23,"tbody"),t.DNE(24,F,17,8,"tr",10),t.k0s()(),t.DNE(25,b,2,0,"p",11),t.k0s()()),2&o&&(t.R7$(24),t.Y8G("ngForOf",r.inquilinos()),t.R7$(),t.Y8G("ngIf",!r.inquilinos().length))},dependencies:[a.MD,a.Sq,a.bT,u.Wk],encapsulation:2})}}return e})();var n=s(9417);let x=(()=>{class e{constructor(){this.api=(0,t.WQX)(d.G)}list(){return this.api.get("/usuarios",{size:1e3}).pipe((0,p.T)(i=>i.content??[]))}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function y(e,l){if(1&e&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&e){const i=l.$implicit;t.Y8G("value",i.id),t.R7$(),t.E5c(" ",i.nome," - ",i.email," (",i.role,") ")}}let v=(()=>{class e{constructor(){this.fb=(0,t.WQX)(n.ok),this.service=(0,t.WQX)(f),this.router=(0,t.WQX)(u.Ix),this.route=(0,t.WQX)(u.nX),this.notification=(0,t.WQX)(h.J),this.usuariosService=(0,t.WQX)(x),this.editing=(0,t.vPA)(!1),this.pending=(0,t.vPA)(!1),this.usuarios=(0,t.vPA)([]),this.form=this.fb.nonNullable.group({nome:["",n.k0.required],cpf:["",n.k0.required],telefone:[""],email:["",[n.k0.required,n.k0.email]],endereco:[""],observacoes:[""],usuarioId:[null]})}ngOnInit(){const i=Number(this.route.snapshot.paramMap.get("id"));i&&(this.editing.set(!0),this.service.find(i).subscribe({next:o=>{this.form.patchValue({nome:o.nome,cpf:o.cpf,telefone:o.telefone??"",email:o.email,endereco:o.endereco??"",observacoes:o.observacoes??"",usuarioId:o.usuario?.id??null})},error:()=>this.notification.error("Nao foi possivel carregar o inquilino.")})),this.loadUsuarios()}submit(){if(this.form.invalid)return void this.form.markAllAsTouched();this.pending.set(!0);const i=this.form.getRawValue(),o=Number(this.route.snapshot.paramMap.get("id"));(this.editing()?this.service.update(o,i):this.service.create(i)).subscribe({next:()=>{this.pending.set(!1),this.notification.success("Inquilino salvo com sucesso."),this.router.navigate(["/inquilinos"])},error:()=>{this.pending.set(!1),this.notification.error("Erro ao salvar o inquilino.")}})}loadUsuarios(){this.usuariosService.list().subscribe({next:i=>this.usuarios.set(i),error:()=>this.notification.warning("Nao foi possivel carregar usuarios.")})}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-inquilino-form"]],standalone:!0,features:[t.aNF],decls:40,vars:5,consts:[[1,"max-w-3xl","mx-auto","card"],[1,"text-2xl","font-semibold","text-primary","mb-6"],[1,"grid","md:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"md:col-span-2"],[1,"text-sm","text-gray-400","block","mb-1"],["formControlName","nome",1,"input-control"],["formControlName","cpf","placeholder","000.000.000-00",1,"input-control"],["formControlName","telefone","placeholder","(00) 00000-0000",1,"input-control"],["formControlName","email","type","email",1,"input-control"],["formControlName","endereco",1,"input-control"],["formControlName","observacoes","rows","4",1,"input-control"],["formControlName","usuarioId",1,"input-control"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"md:col-span-2","flex","justify-end","gap-3"],["type","button",1,"btn-outline",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[3,"value"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2),t.k0s(),t.j41(3,"form",2),t.bIt("ngSubmit",function(){return r.submit()}),t.j41(4,"div",3)(5,"label",4),t.EFF(6,"Nome"),t.k0s(),t.nrm(7,"input",5),t.k0s(),t.j41(8,"div")(9,"label",4),t.EFF(10,"CPF"),t.k0s(),t.nrm(11,"input",6),t.k0s(),t.j41(12,"div")(13,"label",4),t.EFF(14,"Telefone"),t.k0s(),t.nrm(15,"input",7),t.k0s(),t.j41(16,"div",3)(17,"label",4),t.EFF(18,"Email"),t.k0s(),t.nrm(19,"input",8),t.k0s(),t.j41(20,"div",3)(21,"label",4),t.EFF(22,"Endereco"),t.k0s(),t.nrm(23,"input",9),t.k0s(),t.j41(24,"div",3)(25,"label",4),t.EFF(26,"ObservAcoeses"),t.k0s(),t.nrm(27,"textarea",10),t.k0s(),t.j41(28,"div",3)(29,"label",4),t.EFF(30,"Usuario vinculado"),t.k0s(),t.j41(31,"select",11)(32,"option",12),t.EFF(33,"Selecione um usuario"),t.k0s(),t.DNE(34,y,2,4,"option",13),t.k0s()(),t.j41(35,"div",14)(36,"button",15),t.bIt("click",function(){return r.router.navigate(["/inquilinos"])}),t.EFF(37,"Cancelar"),t.k0s(),t.j41(38,"button",16),t.EFF(39,"Salvar"),t.k0s()()()()),2&o&&(t.R7$(2),t.SpI(" ",r.editing()?"Editar inquilino":"Novo inquilino"," "),t.R7$(),t.Y8G("formGroup",r.form),t.R7$(29),t.Y8G("ngValue",null),t.R7$(2),t.Y8G("ngForOf",r.usuarios()),t.R7$(4),t.Y8G("disabled",r.form.invalid||r.pending))},dependencies:[a.MD,a.Sq,n.X1,n.qT,n.xH,n.y7,n.me,n.wz,n.BC,n.cb,n.j4,n.JD],styles:[".input-control[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border-width:1px;border-color:#6366f14d;--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1));padding:.5rem .75rem}.input-control[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity, 1)) }"]})}}return e})();const E=[{path:"",component:k},{path:"novo",component:v},{path:"editar/:id",component:v}]}}]);