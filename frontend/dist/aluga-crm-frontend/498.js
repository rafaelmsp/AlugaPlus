"use strict";(self.webpackChunkaluga_crm_frontend=self.webpackChunkaluga_crm_frontend||[]).push([[498],{8498:(k,c,s)=>{s.r(c),s.d(c,{PREDIOS_ROUTES:()=>y});var e=s(4438),a=s(177),i=s(9417),p=s(6354),m=s(6344);let f=(()=>{class o{constructor(){this.api=(0,e.WQX)(m.G)}list(){return this.api.get("/predios",{size:1e3}).pipe((0,p.T)(t=>t.content??[]))}create(t){return this.api.post("/predios",t)}remove(t){return this.api.delete(`/predios/${t}`)}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var u=s(5567);function g(o,d){1&o&&(e.j41(0,"div",19),e.EFF(1," Carregando predios... "),e.k0s())}function v(o,d){if(1&o&&(e.j41(0,"p",26),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI("Contato: ",t.contato,"")}}function h(o,d){if(1&o&&(e.j41(0,"p",3),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.observacoes)}}function b(o,d){if(1&o){const t=e.RV6();e.j41(0,"div",22)(1,"div",23)(2,"h3",24),e.EFF(3),e.k0s(),e.j41(4,"span",25),e.EFF(5),e.k0s()(),e.j41(6,"p",3),e.EFF(7),e.k0s(),e.j41(8,"p",26),e.EFF(9),e.k0s(),e.j41(10,"p",26),e.EFF(11),e.k0s(),e.DNE(12,v,2,1,"p",27)(13,h,2,1,"p",28),e.j41(14,"div",29)(15,"button",30),e.bIt("click",function(){const r=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.remove(r.id))}),e.EFF(16),e.k0s()()()}if(2&o){const t=d.$implicit,n=e.XpG(2);e.R7$(3),e.JRh(t.nome),e.R7$(2),e.SpI("#",t.id,""),e.R7$(2),e.JRh(t.endereco),e.R7$(2),e.SpI("Unidades: ",t.numeroUnidades||0,""),e.R7$(2),e.SpI("Sindico: ",t.sindico||"Nao informado",""),e.R7$(),e.Y8G("ngIf",t.contato),e.R7$(),e.Y8G("ngIf",t.observacoes),e.R7$(2),e.Y8G("disabled",n.removingId()===t.id),e.R7$(),e.SpI(" ",n.removingId()===t.id?"Removendo...":"Remover"," ")}}function x(o,d){if(1&o&&(e.j41(0,"div",20),e.DNE(1,b,17,9,"div",21),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.predios())}}function F(o,d){1&o&&(e.j41(0,"p",31),e.EFF(1," Nenhum predio cadastrado ate o momento. "),e.k0s())}const y=[{path:"",component:(()=>{class o{constructor(){this.fb=(0,e.WQX)(i.ok),this.service=(0,e.WQX)(f),this.notification=(0,e.WQX)(u.J),this.predios=(0,e.vPA)([]),this.loading=(0,e.vPA)(!1),this.pending=(0,e.vPA)(!1),this.removingId=(0,e.vPA)(null),this.form=this.fb.nonNullable.group({nome:["",i.k0.required],endereco:["",i.k0.required],numeroUnidades:[0,[i.k0.required,i.k0.min(0)]],sindico:[""],contato:[""],observacoes:[""]}),this.load()}load(){this.loading.set(!0),this.service.list().subscribe({next:t=>{this.predios.set(t),this.loading.set(!1)},error:()=>{this.loading.set(!1),this.notification.error("Nao foi possivel carregar os predios.")}})}add(){if(this.form.invalid||this.pending())return void this.form.markAllAsTouched();this.pending.set(!0);const t=this.form.getRawValue(),n={nome:t.nome,endereco:t.endereco,numeroUnidades:Number(t.numeroUnidades),sindico:t.sindico||void 0,contato:t.contato||void 0,observacoes:t.observacoes||void 0};this.service.create(n).subscribe({next:()=>{this.notification.success("Predio cadastrado com sucesso."),this.form.reset({nome:"",endereco:"",numeroUnidades:0,sindico:"",contato:"",observacoes:""}),this.pending.set(!1),this.load()},error:()=>{this.pending.set(!1),this.notification.error("Falha ao cadastrar o predio.")}})}remove(t){!t||this.removingId()===t||(this.removingId.set(t),this.service.remove(t).subscribe({next:()=>{this.notification.success("Predio removido com sucesso."),this.removingId.set(null),this.load()},error:()=>{this.removingId.set(null),this.notification.error("Falha ao remover o predio.")}}))}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-predio-list"]],standalone:!0,features:[e.aNF],decls:38,vars:6,consts:[[1,"space-y-6"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"text-2xl","font-semibold","text-primary"],[1,"text-sm","text-gray-400"],[1,"card","grid","gap-3","md:grid-cols-6",3,"ngSubmit","formGroup"],[1,"md:col-span-2"],[1,"text-xs","text-gray-400","block","mb-1"],["formControlName","nome",1,"input-control"],["formControlName","endereco",1,"input-control"],["type","number","formControlName","numeroUnidades","min","0",1,"input-control"],["formControlName","sindico",1,"input-control"],["formControlName","contato",1,"input-control"],[1,"md:col-span-5"],["formControlName","observacoes","rows","1",1,"input-control"],[1,"flex","items-center","justify-end"],["type","submit",1,"btn-primary","text-sm","h-11","md:self-center","w-full",3,"disabled"],["class","text-center text-gray-400 py-6",4,"ngIf"],["class","grid gap-4 md:grid-cols-2 xl:grid-cols-3",4,"ngIf"],["class","text-center text-gray-500 py-6",4,"ngIf"],[1,"text-center","text-gray-400","py-6"],[1,"grid","gap-4","md:grid-cols-2","xl:grid-cols-3"],["class","card space-y-3",4,"ngFor","ngForOf"],[1,"card","space-y-3"],[1,"flex","items-start","justify-between","gap-2"],[1,"text-lg","font-semibold","text-primary"],[1,"text-xs","text-gray-400"],[1,"text-sm","text-gray-300"],["class","text-sm text-gray-300",4,"ngIf"],["class","text-sm text-gray-400",4,"ngIf"],[1,"flex","justify-end"],["type","button",1,"btn-outline","text-xs","px-3","py-1","border-rose-400","text-rose-400","hover:bg-rose-500/10",3,"click","disabled"],[1,"text-center","text-gray-500","py-6"]],template:function(n,r){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4,"Predios"),e.k0s(),e.j41(5,"p",3),e.EFF(6,"Cadastro de empreendimentos e unidades."),e.k0s()(),e.j41(7,"form",4),e.bIt("ngSubmit",function(){return r.add()}),e.j41(8,"div",5)(9,"label",6),e.EFF(10,"Nome"),e.k0s(),e.nrm(11,"input",7),e.k0s(),e.j41(12,"div",5)(13,"label",6),e.EFF(14,"Endereco"),e.k0s(),e.nrm(15,"input",8),e.k0s(),e.j41(16,"div")(17,"label",6),e.EFF(18,"Unidades"),e.k0s(),e.nrm(19,"input",9),e.k0s(),e.j41(20,"div")(21,"label",6),e.EFF(22,"Sindico"),e.k0s(),e.nrm(23,"input",10),e.k0s(),e.j41(24,"div",5)(25,"label",6),e.EFF(26,"Contato"),e.k0s(),e.nrm(27,"input",11),e.k0s(),e.j41(28,"div",12)(29,"label",6),e.EFF(30,"Observacoes"),e.k0s(),e.nrm(31,"textarea",13),e.k0s(),e.j41(32,"div",14)(33,"button",15),e.EFF(34),e.k0s()()()(),e.DNE(35,g,2,0,"div",16)(36,x,2,1,"div",17)(37,F,2,0,"p",18),e.k0s()),2&n&&(e.R7$(7),e.Y8G("formGroup",r.form),e.R7$(26),e.Y8G("disabled",r.pending()),e.R7$(),e.SpI(" ",r.pending()?"Adicionando...":"Adicionar"," "),e.R7$(),e.Y8G("ngIf",r.loading()),e.R7$(),e.Y8G("ngIf",!r.loading()&&r.predios().length),e.R7$(),e.Y8G("ngIf",!r.loading()&&!r.predios().length))},dependencies:[a.MD,a.Sq,a.bT,i.X1,i.qT,i.me,i.Q0,i.BC,i.cb,i.VZ,i.j4,i.JD],styles:[".input-control[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border-width:1px;border-color:#6366f14d;--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1));padding:.5rem .75rem}.input-control[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity, 1)) }"]})}}return o})()}]}}]);